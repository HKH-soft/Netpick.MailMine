# Production Redis Configuration Example
# Copy relevant sections to your application-pro.yml

# ============================================
# Redis Configuration
# ============================================
spring:
  data:
    redis:
      # Redis server hostname
      host: ${REDIS_HOST:localhost}
      # Redis server port
      port: ${REDIS_PORT:6379}
      # Redis password (leave empty if not using authentication)
      password: ${REDIS_PASSWORD:}
      # Connection timeout
      timeout: 2000ms
      # Lettuce connection pool configuration
      lettuce:
        pool:
          # Maximum number of connections in the pool
          max-active: 8
          # Maximum number of idle connections
          max-idle: 8
          # Minimum number of idle connections
          min-idle: 0
          # Maximum wait time for connection from pool
          max-wait: -1ms
  
  # Cache configuration
  cache:
    # Use Redis for caching (set to 'none' to disable)
    type: redis
    redis:
      # Cache entry time-to-live in milliseconds (1 hour = 3600000)
      time-to-live: 3600000
      # Whether to cache null values
      cache-null-values: false

# ============================================
# Rate Limiting Configuration
# ============================================
rate-limiting:
  # Use Redis for distributed rate limiting
  # Set to true for multi-instance deployments
  # Set to false for single-instance deployments (uses in-memory)
  use-redis: true

# ============================================
# Environment Variables to Set
# ============================================
# For production deployment, set these environment variables:
#
# export REDIS_HOST=your-redis-host.com
# export REDIS_PORT=6379
# export REDIS_PASSWORD=your-redis-password
#
# Or use Docker Compose / Kubernetes ConfigMaps

# ============================================
# Docker Compose Example
# ============================================
# version: '3.8'
# services:
#   redis:
#     image: redis:7-alpine
#     ports:
#       - "6379:6379"
#     volumes:
#       - redis-data:/data
#     restart: unless-stopped
#     command: redis-server --appendonly yes
#   
#   mailmine:
#     image: your-mailmine-image
#     environment:
#       - REDIS_HOST=redis
#       - REDIS_PORT=6379
#       - SPRING_PROFILES_ACTIVE=pro
#     depends_on:
#       - redis
#
# volumes:
#   redis-data:

# ============================================
# Performance Tuning Tips
# ============================================
# 
# For high-traffic applications:
# - Increase max-active to 16 or higher
# - Adjust time-to-live based on data update frequency
# - Monitor cache hit rates via actuator metrics
# - Consider Redis clustering for very high loads
#
# Cache TTL recommendations:
# - Static/rarely changing data: 1-4 hours (3600000-14400000 ms)
# - Frequently updated data: 5-15 minutes (300000-900000 ms)
# - Real-time data: Consider not caching or very short TTL (30000 ms)
